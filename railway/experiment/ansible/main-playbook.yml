# Docker
- name: Install Docker
  apt:
    name: docker.io
    state: present
    update_cache: true
  become: true

- name: Ensure Docker is started and enabled
  service:
    name: docker
    state: started
    enabled: true
  become: true

# NATS Cluster
- name: Setup NATS cluster
  hosts: nats_servers
  become: true
  roles:
    - nats

# ZooKeeper Cluster
- name: Setup ZooKeeper cluster
  hosts: zookeeper_servers
  become: true
  roles:
    - zookeeper

# Services
- name: Setup Services
  hosts: services_servers
  become: true
  roles:
    - services

# Runtime
- name: Setup Runtimes
  hosts: runtime_servers
  become: true
  roles:
    - runtime

# Global
- name: Setup Global
  hosts: global_servers
  become: true
  roles:
    - global
