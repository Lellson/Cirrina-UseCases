# NATS server configuration file

$SYS { users = [ { user: "admin", pass: "qwerty" } ] }

# Cluster configuration
cluster {
  listen: "0.0.0.0:6222"
  name: {{ hostvars[host]['ansible_host'] }}

  authorization {
    user: admin
    password: qwerty
  }

  # Routes to other servers in the cluster
  routes = [
{% for host in groups['nats_servers'] %}
    nats-route://{{ hostvars[host]['ansible_host'] }}:6222{% if not loop.last %},{% endif %}
{% endfor %}
  ]
}

# Client port
port: 4222

# HTTP monitoring port
http_port: 8222